<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.7.0/d3.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <style>
      line {
        stroke: #1f1f1f;
        stroke-width: 2px;
      }
    </style>
  </head>
  <body>
    <h1>L8: Networks/Graphs and Trees</h1>
    <h3>Samantha Daniels</h3>

    <svg id="love" width="800" height="600"></svg>

    <script>
      const width = 800;
      const height = 600;
      const svg = d3.select("#love");

      d3.json("./love_actually.json").then((data) => {
        const nodes = data.nodes;
        const links = data.links;

        // Add lines for the links
        const link = svg
          .selectAll("line")
          .data(links)
          .enter()
          .append("line")
          .style("opacity", 0.05)
          .attr("stroke-width", "1px");

        // Add circles for the nodes
        const node = svg
          .selectAll("circle")
          .data(nodes)
          .enter()
          .append("circle")
          .attr("r", 10)
          .attr("fill", "hotpink")
          .attr("stroke", "purple")
          .attr("stroke-width", 1);

        // Force simulation
        const simulation = d3
          .forceSimulation(nodes)
          .force("charge", d3.forceManyBody().strength(-15))
          .force("center", d3.forceCenter(width / 2, height / 2))
          .force("collision", d3.forceCollide().radius(15))
          .force(
            "link",
            d3
              .forceLink(links)
              .id((d) => d.id)
              .distance(100)
          )
          .on("tick", ticked);

        // Ticked function updates node and link positions
        function ticked() {
          link
            .attr("x1", (d) => d.source.x)
            .attr("y1", (d) => d.source.y)
            .attr("x2", (d) => d.target.x)
            .attr("y2", (d) => d.target.y);

          node.attr("cx", (d) => d.x).attr("cy", (d) => d.y);
        }
      });
    </script>
  </body>
</html>

